---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE } from '../../consts';
import { episodes } from '../../data/episodes';

const WEEKLY_TITLE = "Madhu Sudhan Subedi Tech Weekly";
const WEEKLY_DESCRIPTION = "Tech Weekly update covering Software Engineering, DevOps, and Software Architecture topics.";
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`${WEEKLY_TITLE} | ${SITE_TITLE}`} description={WEEKLY_DESCRIPTION} />
		<style>
			.podcast-container {
				max-width: 800px;
				margin: 2rem auto;
				padding: 1rem;
			}
			.episode {
				background: #f5f5f5;
				border-radius: 8px;
				padding: 1.5rem;
				margin-bottom: 1.5rem;
			}
			.episode-title {
				font-size: 1.5rem;
				margin-bottom: 1rem;
			}
			.episode-description {
				margin-bottom: 1rem;
				line-height: 1.6;
			}
			audio {
				width: 100%;
				margin-top: 1rem;
			}
		</style>
	</head>
	<body>
		<Header />
		<main>
			<div class="podcast-container">
				<h1>{WEEKLY_TITLE}</h1>
				<p class="description">{WEEKLY_DESCRIPTION}</p>
				
				{episodes.map((episode) => (
					<div class="episode">
						<h2 class="episode-title">
							<a href={`/weekly/${episode.id}`} style="text-decoration: none; color: inherit;">
								Episode #{episode.id}: {episode.title}
							</a>
						</h2>
						<audio controls>
							<source src={`/podcasts/${episode.audioFile}`} type="audio/mp4">
							Your browser does not support the audio element.
						</audio>
					</div>
				))}
			</div>
		</main>
		<Footer />
	</body>
</html>